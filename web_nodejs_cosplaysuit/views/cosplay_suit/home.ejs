<!DOCTYPE html>
<html lang="en">

<head>
  <title>Home | Coplay Suit</title>
  <!-- Font Awesome Cdn Link -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
  <link rel="stylesheet" href="/bootstrap-5.3.0-alpha1-dist/css/bootstrap.min.css">
  <style>
    /*  import google fonts */
    @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap");

    * {
      margin: 0;
      padding: 0;
      outline: none;
      border: none;
      text-decoration: none;
      list-style: none;
      box-sizing: border-box;
      font-family: "Poppins", sans-serif;
    }

    /* body {
      background: rgb(233, 233, 233);
    } */

    .container-fluid {
      display: flex;
      padding: 0;
      margin: 0 auto;
    }

    nav {
      position: sticky;
      top: 0;
      left: 0;
      bottom: 0;
      width: 310px;
      height: 110vh;
      background: rgb(246, 246, 246);
    }

    .navbar {
      width: 90%;
      margin: 0 auto;
    }

    .logo {
      margin: 2rem 0 1rem 0;
      padding-bottom: 3rem;
      display: flex;
      align-items: center;
    }

    .logo img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
    }

    .logo h1 {
      margin-left: 1rem;
      text-transform: lowercase;
    }

    li {
      padding-bottom: 2rem;
    }

    li a {
      font-size: 16px;
      color: rgb(85, 83, 83);
    }

    nav i {
      font-size: 18px;
      /* text-align: left; */
    }

    .logout {
      position: absolute;
      top: 20px;
      bottom: 20px;
    }

    /* Main Section */
    .main {

      width: 100%;

    }

    .main-top {
      background: rgb(246, 246, 246);
      width: 100%;

      padding: 40px 10px 20px 10px;
      text-align: center;
      font-size: 18px;
      letter-spacing: 1.5px;
      text-transform: uppercase;

    }

    .main-top1 {
      margin-top: 60px;
      width: 100%;
      padding: 10px;
      text-align: center;

    }

    .main-body {
      padding: 10px 10px 10px 20px;
    }

    h1 {
      margin: 20px 10px;
    }
  </style>
</head>

<body>
  <div class="container-fluid">
    <nav class="nav flex-column">
      <div class="navbar">
        <div class="logo">
          <img src="https://cdn.dribbble.com/users/17621009/avatars/small/data?1695481321" alt="">
          <h6 style="margin-left: 10px;width: 110%;">
            <%=username%>
          </h6>
        </div>

        <ul style="display: inline-block;text-align: left;padding-left: 0px;">
          <li><a class="nav-link" href="/users/home" style="font-size: 16px;color: rgb(85, 83, 83);">
              <i class="fas fa-user"></i>
              <span class="nav-item">Quản lý sản phẩm</span>
            </a>
          </li>
          <li><a class="nav-link" href="/category/getCategory" style="font-size: 16px;color: rgb(85, 83, 83);">
              <i class="fas fa-industry"></i>
              <span class="nav-item">Quản lý thể loại</span>
            </a>
          </li>
          <li><a class="nav-link" href="/users/home/quanlykhachhang" style="font-size: 16px;color: rgb(85, 83, 83);">
              <i class="fas fa-chart-bar"></i>
              <span class="nav-item">Quản lý khách hàng</span>
            </a>
          </li>
          <li><a class="nav-link" href="/billw/getbilldone" style="font-size: 16px;color: rgb(85, 83, 83);">
              <i class="fa fa-kaaba"></i>
              <span class="nav-item">Quản lý đơn hàng</span>
            </a>
          </li>
          <li><a class="nav-link" href="/salesman/home/quanlynguoiban" style="font-size: 16px;color: rgb(85, 83, 83);">

              <i class="fas fa-tasks"></i>
              <span class="nav-item">Quản lý người bán</span>
            </a>
          </li>

          <li><a class="nav-link" href="#" style="font-size: 16px;color: rgb(85, 83, 83);">
              <i class="fab fa-dochub"></i>
              <span class="nav-item">Thống kê</span>
            </a>
          </li>
          <li><a class="nav-link" href="/users/account" style="font-size: 16px;color: rgb(85, 83, 83);">
              <i class="fab fa-dochub"></i>
              <span class="nav-item">Account</span>
            </a>
          </li>
          <li><a class="nav-link" href="/logout" class="logout" style="font-size: 16px;color: rgb(85, 83, 83);">
              <i class="fas fa-sign-out-alt"></i>
              <span class="nav-item">Logout</span>
            </a>
          </li>
        </ul>
      </div>



    </nav>
    <section class="main">
      <div class="main-top">
        <h3 style="font-size: 20px;margin-bottom: 0px;">Quản lý sản phẩm</h3>
      </div>
      <div class="main-top1">
        <table class="table" style="border: 1px solid rgb(234, 226, 226);">
          <thead>
            <tr>
              <th colspan="8">
                <div class="container" style="text-align: center;justify-content: center;">
                  <div class="" style="display: flex;padding: 10px;justify-content: space-between;align-items: center;">
                    <div style="display: flex;justify-content: center;text-align: center;">
                      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-checkup-list"
                        width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <path d="M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2">
                        </path>
                        <path d="M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z">
                        </path>
                        <path d="M9 14h.01"></path>
                        <path d="M9 17h.01"></path>
                        <path d="M12 16l1 1l3 -3"></path>
                      </svg>
                      <h5 style="margin-left: 10px;margin-bottom: 0px;">Danh Sách Sản Phẩm</h5>
                    </div>

                    <form class="d-flex" role="search" action="/users/home" method="GET">
                      <select class="form-select" aria-label="Default select example" name="id_category"
                        style="margin-right: 10px; width: 150px;">
                        <option value="all">Tất Cả</option>
                        <% listTL.forEach((row)=> { %>
                          <option value="<%= row._id  %>">
                            <%= row.name %>
                          </option>
                          <% }) %>
                      </select>

                      <button class="btn btn-outline-success" type="submit">Lọc</button>
                    </form>


                    <div>
                      <form class="d-flex" role="search" id="searchForm">
                        <input class="form-control me-2" type="search" style="width: 300px;"
                          placeholder="Enter Name Shop" aria-label="Search" name="nameShop" id="searchInput">
                        <button class="btn btn-outline-success" type="button" onclick="search()">Search</button>
                      </form>
                    </div>
                  </div>
                </div>
              </th>
            </tr>
          </thead>
          <thead>
            <tr>
              <th scope="col">STT </th>

              <th scope="col"> Shop </th>

              <th scope="col" style="display: flex;text-align: center;justify-content: center;">Name
              </th>
              <th scope="col">Price</th>
              <th scope="col">Category
              </th>
              <!-- <th scope="col"> Image</th> -->
              <th scope="col"> Description</th>
              <th scope="col"> Time Product</th>
              <!-- <th scope="col"></th> -->
            </tr>
          </thead>

          <body>

            <% let count=1; %>
              <% listProduct.forEach( ( row )=> { %>
                <tr class="tr_hover">
                  <td>
                    <%= count %>

                  </td>
                  <td class="td_id">
                    <%= row.id_shop.nameshop %>
                  </td>
                  <td class="td_name"
                    style="max-width: 200px;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;">
                    <%= row.nameproduct %>
                  </td>
                  <td class="td_price">
                    <%= row.price %>
                  </td>
                  <td class="td_Category">
                    <%= row.id_category.name %>
                      <!-- row.id_category.name -->
                  </td>
                  <td class="td_Description"
                    style="max-width: 150px;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;">
                    <%= row.description %>
                  </td>
                  <td>
                    <%= row.time_product %>
                  </td>

                  <!-- <td>
                    <%if(row.status==false){%>
                      <p style="color: red;margin: 0px;">Disabled</p>
                      <%}%>
                  </td> -->

                  <!-- <td>
                    <a id="a_none" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-dots-vertical"
                        width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>
                        <path d="M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>
                        <path d="M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>
                      </svg>
                    </a>
                    <ul class="dropdown-menu">
                      <li style="padding: 0;">
                        <a type="button" class="dropdown-item" data-bs-toggle="modal" id="vohieuButton"
                          data-bs-target="#vohieuModal<%= row._id %>">
                          <%if(row.status==false){%>
                            Hiển thị sản phẩm
                            <%}else{%>
                              Ẩn sản phẩm
                              <%}%>
                        </a>
                      </li>

                    </ul>
                  </td> -->
                  <td>
                    <!-- 
                    <a id="a_none" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-dots-vertical"
                        width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>
                        <path d="M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>
                        <path d="M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>
                      </svg>
                    </a>
                    <ul class="dropdown-menu">
                      <li style="padding: 0;">
                        <a type="button" class="dropdown-item" data-bs-toggle="modal" id="vohieuButton"
                          data-bs-target="#vohieuModal<%= row._id %>">
                          <%if(row.status==false){%>
                            Hiển thị sản phẩm
                            <%}else{%>
                              Ẩn sản phẩm
                              <%}%>
                        </a>
                      </li>

                    </ul>
                  </td>
                  <div class="modal fade" id="vohieuModal<%= row._id %>" tabindex="-1"
                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h1 class="modal-title fs-5" id="exampleModalLabel">
                            <%if(row.status==false){%>
                              Hiển thị sản phẩm
                              <%}else{%>
                                Ẩn sản phẩm
                                <%}%>
                          </h1>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body" style="text-align: left;">
                          <%if(row.status==true){%>
                            <h6 style="text-align: left;color: red;"><svg xmlns="http://www.w3.org/2000/svg"
                                class="icon icon-tabler icon-tabler-alert-triangle" width="24" height="24"
                                viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <path d="M12 9v4"></path>
                                <path
                                  d="M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z">
                                </path>
                                <path d="M12 16h.01"></path>
                              </svg> Bạn muốn ẩn sản phẩm này đi không ?</h6>

                            <%}else{%>
                              <h6 style="text-align: left;color: #1b3a57;">
                                <svg xmlns="http://www.w3.org/2000/svg"
                                  class="icon icon-tabler icon-tabler-alert-circle-filled" width="24" height="24"
                                  viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                  stroke-linecap="round" stroke-linejoin="round">
                                  <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                  <path
                                    d="M12 2c5.523 0 10 4.477 10 10a10 10 0 0 1 -19.995 .324l-.005 -.324l.004 -.28c.148 -5.393 4.566 -9.72 9.996 -9.72zm.01 13l-.127 .007a1 1 0 0 0 0 1.986l.117 .007l.127 -.007a1 1 0 0 0 0 -1.986l-.117 -.007zm-.01 -8a1 1 0 0 0 -.993 .883l-.007 .117v4l.007 .117a1 1 0 0 0 1.986 0l.007 -.117v-4l-.007 -.117a1 1 0 0 0 -.993 -.883z"
                                    stroke-width="0" fill="currentColor"></path>
                                </svg> Bạn có muốn hiển thị sản phẩm này không.
                              </h6>
                              <%}%>
                                <p style="margin-top: 40px;margin-bottom:0px;color: #a7a4a4">Sản phẩm:</p>
                                <p style="margin-bottom: 0px;">
                                  <%=row.nameproduct%>
                                </p>

                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-light" data-bs-dismiss="modal">Hủy bỏ</button>
                          <form action="" method="post">
                            <input type="hidden" name="id_product" value="<%= row._id %>" style="display: none;" />
                            <input type="hidden" name="id_status" value="<%= row.status %>" style="display: none;" />
                            <%if(row.status==true){%>
                              <button class="btn btn-danger" type="submit">Ẩn</button>
                              <%}else{%>
                                <button class="btn btn-primary" type="submit">Hiện</button>
                                <%}%>

                          </form>

                        </div>
                      </div>
                    </div>
                  </div> -->

                </tr>
                <% count +=1; %>
                  <% } ) %>

          </body>

        </table>
      </div>

      <%if(!(listProduct===null || (Array.isArray(listProduct) && listProduct.length===0))){%>
        <div class="container">
          <div class="row">
            <div class="col-12 col-sm-2 col-md-2">
              <div class="row" style="margin-top: 8px;">
                <h6>
                  <%=page%>/<%=page_length%>
                </h6>
              </div>
            </div>
            <div class="col-12 col-sm-7 col-md-7">
              <div class="row"></div>
            </div>
            <div class="col-12 col-sm-3 col-md-3">
              <div class="row">
                <nav aria-label="Page navigation example" style="height: 0px;">
                  <ul class="pagination justify-content-end">
                    <li class="page-item">
                      <%if(page>1){%>
                        <a class="page-link" href="/users/home?page=<%=page-1%>" aria-label="Previous">
                          <span aria-hidden="true">&laquo;</span>
                        </a>
                        <%}%>

                    </li>
                    <%for(let i=1;i<=page_length;i++){%>
                      <li class="page-item"><a class="page-link" href="/users/home?page=<%=i%>">
                          <%=i%>
                        </a></li>
                      <%}%>
                        <li class="page-item">
                          <%if(page>=page_length){%>

                            <%}else{%>
                              <a class="page-link" href="/users/home?page=<%=page+1%>" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                              </a>
                              <%}%>

                        </li>
                  </ul>
                </nav>
              </div>

            </div>
          </div>

        </div>
        <%}%>

    </section>

  </div>

  <script>
    function search() {
      var input = document.getElementById('searchInput');
      var filter = input.value.toUpperCase();
      var table = document.querySelector('table');
      var rows = table.getElementsByTagName('tr');

      for (var i = 0; i < rows.length; i++) {
        var nameShopCell = rows[i].getElementsByClassName('td_name')[0];

        if (nameShopCell) {
          var nameShopText = nameShopCell.textContent || nameShopCell.innerText;

          if (nameShopText.toUpperCase().indexOf(filter) > -1) {
            rows[i].style.display = '';
          } else {
            rows[i].style.display = 'none';
          }
        }
      }
    }
    document.getElementById('searchInput').addEventListener('keyup', function (event) {
      if (event.key === 'Enter') {
        search();
      }
    });



  </script>
  <script src="/bootstrap-5.3.0-alpha1-dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>